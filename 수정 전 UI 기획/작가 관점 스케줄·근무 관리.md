# 🧠 작가 관점 스케줄·근무 관리 

## 📌 한 줄 요약
**작가는 "오늘 뭐 해야 하지?"를 대시보드에서 보고, 연재·마감·휴재·워케이션을 캘린더랑 버튼 몇 개로 관리한다.**

---

## 📌 1. 작가가 매일 하는 행동부터 생각해보자

### 1-1. 작가 하루 루틴 (진짜 현실 기준)

```
1. 로그인한다
2. 오늘 마감 있는지 본다
3. 오늘 연재인지 확인한다
4. 워케이션이면 출근(체크인)한다
5. 작업한다
6. 밤에 퇴근(체크아웃) + 오늘 한 일 적는다
7. 아프거나 못 할 것 같으면 휴재 신청한다
```

👉 **이걸 화면으로 어떻게 나누느냐가 전부야.**

---

## 📌 2. 그래서 필요한 화면은 딱 4~5개뿐이야

### ✅ ① 대시보드 (제일 중요)
**"오늘 기준 요약 화면"**

#### 여기서 보여줘야 하는 것
- **오늘 연재 있음? / 없음?**
- **오늘 마감 있음?** → D-3 / D-1 / D-day
- **워케이션 중이면**
  - 오늘 체크인 했는지
  - 아직 안 했으면 [체크인] 버튼
- **승인 대기 중인 신청 있음?**
- **버튼**
  - 휴재 신청
  - 워케이션 신청
  - 내 스케줄 보기

👉 **앱 열자마자 이 화면 하나만 봐도 오늘 할 일 알 수 있게**

#### UI 구조
```
┌─────────────────────────────────────┐
│  오늘 날짜: 2025년 1월 15일 (수)    │
├─────────────────────────────────────┤
│  📅 오늘의 일정                      │
│  • 연재일: "작품A" (네이버)         │
│  • 마감일: "작품B" (D-day) ⚠️       │
├─────────────────────────────────────┤
│  🏖️ 워케이션 중                     │
│  • 체크인: ✅ 완료 (09:30)          │
│  • 체크아웃: [체크아웃] 버튼        │
├─────────────────────────────────────┤
│  📋 승인 대기                        │
│  • 휴재 신청 1건 대기 중            │
│  • [확인하기] 버튼                   │
├─────────────────────────────────────┤
│  🚀 빠른 액션                        │
│  [휴재 신청] [워케이션 신청]        │
│  [내 스케줄 보기]                   │
└─────────────────────────────────────┘
```

#### 비즈니스 로직
```
1. 로그인 시 대시보드 데이터 자동 로드
2. 오늘 날짜 기준으로 다음 정보 조회:
   - 오늘의 연재일 (works 테이블에서 serialization_days 확인)
   - 오늘의 마감일 (연재일 - 3일 계산)
   - 워케이션 진행 여부 및 체크인 상태
   - 승인 대기 중인 신청 건수
3. 실시간 업데이트 (알림 수신 시)
```

#### 필요한 API
```
GET /api/authors/dashboard/today
응답:
{
  "today": "2025-01-15",
  "serializations": [
    { "workName": "작품A", "platform": "네이버" }
  ],
  "deadlines": [
    { "workName": "작품B", "dday": 0, "status": "urgent" }
  ],
  "workcation": {
    "isActive": true,
    "checkinStatus": "completed",
    "checkinTime": "09:30",
    "checkoutStatus": "pending"
  },
  "pendingRequests": 1
}
```

---

### ✅ ② 내 스케줄 (캘린더)
**"모든 일정 모아보는 화면"**

#### 캘린더에 표시되는 것
- **연재일** (작품별 색상 구분)
- **마감일** (D-day 배지 표시)
- **휴재 기간** (회색 처리)
- **연차/근태** (다른 색상)
- **워케이션 기간**

#### 동작
- 날짜 클릭 → "이날 뭐 있는지" 팝업
- 휴재랑 연재 겹치면 → 빨간 경고 표시

👉 **작가는 생각 안 하고 달력만 보면 됨**

#### UI 구조
```
┌─────────────────────────────────────┐
│  [월별] [주별] [일별] ← 뷰 전환     │
├─────────────────────────────────────┤
│  일  월  화  수  목  금  토         │
│      1   2   3   4   5   6          │
│  7   8   9  10  11  12  13         │
│ 14 [15] 16  17  18  19  20         │
│     📅연재                          │
│     ⚠️마감                          │
│ 21  22  23  24  25  26  27         │
│ 28  29  30  31                      │
├─────────────────────────────────────┤
│  범례:                              │
│  📅 연재일  ⚠️ 마감일  🏖️ 워케이션  │
│  🏖️ 휴재    📋 연차                │
└─────────────────────────────────────┘
```

#### 비즈니스 로직
```
1. 작가의 모든 작품 조회
2. 각 작품의 연재 요일 기준으로 연재일 계산
3. 연재일 - 3일 = 마감일 계산
4. 근태 신청 정보와 병합
5. 충돌 감지:
   - 휴재 기간과 연재일 겹치면 경고
   - 워케이션과 마감일 겹치면 알림
```

#### 필요한 기술 스택
```json
{
  "dependencies": {
    "@fullcalendar/react": "^6.1.10",
    "@fullcalendar/daygrid": "^6.1.10",
    "date-fns": "^2.30.0"
  }
}
```

#### 필요한 API
```
GET /api/authors/calendar?month=2025-01
응답:
{
  "events": [
    {
      "date": "2025-01-15",
      "type": "serialization",
      "workName": "작품A",
      "platform": "네이버"
    },
    {
      "date": "2025-01-12",
      "type": "deadline",
      "workName": "작품A",
      "dday": 3
    },
    {
      "date": "2025-01-20",
      "type": "hiatus",
      "startDate": "2025-01-20",
      "endDate": "2025-01-27"
    }
  ]
}
```

---

### ✅ ③ 휴재 / 근태 신청 화면
**"못 할 때 미리 알리는 화면"**

#### 작가가 하는 행동
1. 휴재 신청 버튼 누른다
2. 작품 고른다
3. 며칠 쉬는지 고른다
4. 이유 적는다
5. 제출

#### 시스템이 자동으로 해주는 것
- 연재 며칠 영향 받는지 계산
- 연재/마감 겹치면 경고
- 승인 상태 관리

#### 작가는
- 대기 / 승인 / 반려 상태만 보면 됨

👉 **"휴재 신청서" 전자화한 느낌**

#### UI 구조
```
┌─────────────────────────────────────┐
│  휴재 신청                           │
├─────────────────────────────────────┤
│  1단계: 작품 선택                    │
│  ☑ 작품A (네이버, 화요일 연재)      │
│  ☐ 작품B (카카오, 목요일 연재)      │
│                                     │
│  2단계: 휴재 기간                    │
│  시작일: [2025-01-20]               │
│  종료일: [2025-01-27]               │
│  ⚠️ 총 2회차 연재에 영향            │
│                                     │
│  3단계: 휴재 유형                    │
│  ○ 정기 휴재                        │
│  ○ 건강 휴재                        │
│  ○ 긴급 휴재                        │
│                                     │
│  4단계: 사유                        │
│  [텍스트 입력 영역]                 │
│                                     │
│  [신청하기] 버튼                    │
└─────────────────────────────────────┘
```

#### 비즈니스 로직
```
1. 작품 선택 시:
   - 선택한 작품의 연재 요일 확인
   - 휴재 기간과 겹치는 연재일 계산
   - "총 N회차 연재에 영향" 표시

2. 신청 제출 시:
   - 연재 일정 충돌 검증
   - 충돌 시 경고 메시지 표시
   - 근태 신청 테이블에 저장
   - 편집자에게 알림 발송

3. 승인 프로세스:
   - 편집자 1차 승인
   - 운영팀 최종 승인
   - 승인 완료 시 연재 캘린더에 자동 반영
```

#### 필요한 기술 스택
```json
{
  "dependencies": {
    "react-hook-form": "^7.48.2",
    "react-datepicker": "^4.21.0",
    "date-fns": "^2.30.0"
  }
}
```

#### 필요한 API
```
POST /api/leaves/requests/hiatus
요청:
{
  "workIds": [1, 2],
  "startDate": "2025-01-20",
  "endDate": "2025-01-27",
  "hiatusType": "health",
  "reason": "손목 통증으로 인한 휴재"
}

응답:
{
  "requestId": 123,
  "affectedEpisodes": 2,
  "status": "pending",
  "message": "편집자 승인 대기 중입니다"
}
```

---

### ✅ ④ 워케이션 관리 화면
**"원격 근무용 출퇴근 화면"**

#### 워케이션 승인되면 자동으로 생김

**아침:**
- [체크인] 버튼 누른다

**저녁:**
- [체크아웃] 버튼 누른다
- 오늘 한 일 간단히 적는다

#### 화면에 보이는 것
- 오늘 체크인/체크아웃 상태
- 오늘 근무 시간
- 오늘 업무 보고 작성란

👉 **회사 출퇴근 찍는 거랑 완전히 같은 개념**

#### UI 구조
```
┌─────────────────────────────────────┐
│  워케이션 관리                      │
│  기간: 2025-01-15 ~ 2025-01-22     │
├─────────────────────────────────────┤
│  오늘 (2025-01-15)                  │
│                                     │
│  체크인: ✅ 완료 (09:30)           │
│  위치: 서울시 강남구                │
│                                     │
│  체크아웃: [체크아웃] 버튼          │
│                                     │
│  ────────────────────────────────  │
│                                     │
│  오늘의 업무 보고                    │
│  • 업무 내용: [입력란]              │
│  • 진행률: [슬라이더] 50%            │
│  • 완료한 작업:                      │
│    ☑ 콘티 완료                      │
│    ☑ 선화 50% 완료                  │
│  • 내일 계획: [입력란]              │
│                                     │
│  [제출] 버튼                        │
└─────────────────────────────────────┘
```

#### 비즈니스 로직
```
1. 체크인 시:
   - 현재 위치 자동 기록 (GPS)
   - 위치명 자동 인식 (Geocoding API)
   - 체크인 시간 기록
   - 사진 업로드 (선택)

2. 체크아웃 시:
   - 체크아웃 시간 기록
   - 일일 근무 시간 자동 계산 (체크아웃 - 체크인)
   - 위치 기록

3. 일일 업무 보고:
   - 워케이션 기간 중 매일 제출 필수
   - 보고 내용: 업무 내용, 진행률, 완료한 작업, 다음 날 계획
   - 미제출 시 관리자에게 알림 발송
```

#### 필요한 기술 스택
```json
{
  "dependencies": {
    "@react-google-maps/api": "^2.19.0",
    "react-geocode": "^0.2.1",
    "react-slider": "^2.0.6"
  }
}
```

#### 필요한 API
```
POST /api/leaves/workcations/{id}/checkin
요청:
{
  "latitude": 37.5665,
  "longitude": 127.0780
}

POST /api/leaves/workcations/{id}/checkout
POST /api/leaves/workcations/{id}/daily-report
요청:
{
  "workContent": "콘티 완료 및 선화 진행",
  "progressRate": 50,
  "completedTasks": ["콘티 완료", "선화 50%"],
  "nextDayPlan": "선화 완료 및 채색 시작"
}
```

---

### (선택) ⑤ 건강 설문
**"상태 안 좋을 때만 등장"**

- 마감 지연되면 자동으로 뜸
- 손목 아픈지, 피곤한지 체크
- 결과로 "쉬는 게 나을지도?" 안내

👉 **항상 보이는 화면 아님**

#### UI 구조
```
┌─────────────────────────────────────┐
│  건강 설문                           │
│  마감 지연으로 인해 건강 상태를      │
│  확인하고 있습니다.                  │
├─────────────────────────────────────┤
│  손목 통증: [슬라이더] 7점          │
│  허리/목 통증: [슬라이더] 5점       │
│  눈 피로도: [슬라이더] 6점          │
│  마감 스트레스: [슬라이더] 8점      │
│  수면 시간: [입력] 5시간             │
│  밤샘 작업 횟수: [입력] 3회         │
│                                     │
│  [제출] 버튼                        │
└─────────────────────────────────────┘
```

---

## 📌 3. 기능을 더 쉽게 말하면 이거야

### 📌 연재 스케줄
**"나는 매주 화요일 연재함"**
→ 시스템: "그럼 마감은 토요일이네"

### 📌 마감 알림
- "3일 남았어요" (D-3)
- "오늘 마감이에요" (빨간색, D-day)

### 📌 휴재
**"이번 주는 못 해요"**
→ 시스템: "이 작품 2회 연재 영향 있음"

### 📌 워케이션
**"나 여행 가서 일할게요"**
→ 승인 나면 → 매일 출퇴근 찍고 보고만 하면 끝

---

## 📌 4. 회의에서 이렇게 말하면 된다 (진짜 중요)

### 핵심 메시지
1. **"UI부터 그리기 전에 작가가 하루에 뭘 누르는지부터 정리했어요."**
2. **"작가 화면은 대시보드 / 캘린더 / 휴재 신청 / 워케이션 관리 이 네 개면 충분해요."**
3. **"휴재랑 워케이션은 연재 일정이랑 자동으로 겹치는지만 체크해주면 됩니다."**

---

## 📌 5. 비즈니스 로직 상세

### 5-1. 연재 일정 자동 계산
```
입력: 작품A, 화요일 연재, 마감일 3일 전
계산:
- 오늘이 2025-01-15 (수요일)이면
- 다음 화요일: 2025-01-21
- 마감일: 2025-01-18 (토요일)
```

### 5-2. 휴재 영향도 계산
```
입력: 작품A (화요일), 휴재 2025-01-20 ~ 2025-01-27
계산:
- 2025-01-21 (화) 연재일 포함 → 영향 1회차
- 2025-01-28 (화) 연재일 포함 → 영향 1회차
결과: 총 2회차 연재에 영향
```

### 5-3. 충돌 감지
```
휴재 기간과 연재일 겹치면:
- 경고 메시지: "선택한 기간에 연재일이 포함되어 있습니다."
- 작가가 확인 후 제출하도록 유도
```

---

## 📌 6. 데이터베이스 설계 (핵심만)

### 6-1. 작품 테이블 (works)
```sql
CREATE TABLE works (
  work_id BIGSERIAL PRIMARY KEY,
  author_id BIGINT NOT NULL,
  work_name VARCHAR(255) NOT NULL,
  platform VARCHAR(50) NOT NULL,
  serialization_days JSONB, -- [2] = 화요일
  deadline_days_before INT DEFAULT 3,
  status VARCHAR(20) DEFAULT 'ongoing',
  created_at TIMESTAMP DEFAULT NOW()
);
```

### 6-2. 연재 일정 테이블 (serialization_schedules)
```sql
CREATE TABLE serialization_schedules (
  schedule_id BIGSERIAL PRIMARY KEY,
  work_id BIGINT NOT NULL,
  serialization_date DATE NOT NULL,
  deadline_date DATE NOT NULL,
  status VARCHAR(20) DEFAULT 'pending',
  UNIQUE(work_id, serialization_date)
);
```

### 6-3. 휴재 신청 테이블 (hiatus_requests)
```sql
CREATE TABLE hiatus_requests (
  request_id BIGSERIAL PRIMARY KEY,
  author_id BIGINT NOT NULL,
  work_ids JSONB, -- [1, 2]
  start_date DATE NOT NULL,
  end_date DATE NOT NULL,
  affected_episodes INT,
  reason TEXT,
  status VARCHAR(20) DEFAULT 'pending',
  created_at TIMESTAMP DEFAULT NOW()
);
```

---

## 📌 7. 필요한 기술 스택 정리

### Frontend 필수 패키지
```json
{
  "dependencies": {
    "@fullcalendar/react": "^6.1.10",
    "@fullcalendar/daygrid": "^6.1.10",
    "react-hook-form": "^7.48.2",
    "react-datepicker": "^4.21.0",
    "date-fns": "^2.30.0",
    "@react-google-maps/api": "^2.19.0",
    "react-geocode": "^0.2.1",
    "react-slider": "^2.0.6"
  }
}
```

### Backend 필수 패키지
```json
{
  "dependencies": {
    "moment": "^2.29.4",
    "moment-timezone": "^0.5.43",
    "node-cron": "^3.0.2",
    "joi": "^17.11.0",
    "multer": "^1.4.5-lts.1"
  }
}
```

### 외부 API
- 네이버 지도 API 또는 Google Maps API
- Geocoding API (주소 ↔ 좌표 변환)

---

## 📌 8. API 엔드포인트 (핵심만)

### 대시보드
```
GET /api/authors/dashboard/today
```

### 캘린더
```
GET /api/authors/calendar?month=2025-01
```

### 휴재 신청
```
POST /api/leaves/requests/hiatus
GET  /api/leaves/requests/hiatus
```

### 워케이션
```
POST /api/leaves/workcations/{id}/checkin
POST /api/leaves/workcations/{id}/checkout
POST /api/leaves/workcations/{id}/daily-report
GET  /api/leaves/workcations/active
```

---

## 📌 9. 지금 단계에서 안 해도 되는 것

- ❌ 너무 디테일한 통계
- ❌ 위치 실시간 추적
- ❌ 관리자 화면 먼저 디자인
- ❌ 건강 리포트 고급 분석

**→ 나중에 추가하면 됨**

---

## 📌 10. 한 문장 정리 (핵심)

**작가는 "오늘 할 일"을 보고, 못 하면 휴재 신청하고, 워케이션이면 출퇴근 찍는 구조다.**

---

## 📌 11. 개발 우선순위

### Phase 1 (최우선)
1. ✅ 대시보드 - 오늘의 일정 요약
2. ✅ 캘린더 - 연재일/마감일 표시
3. ✅ 휴재 신청 - 기본 기능

### Phase 2
4. ✅ 워케이션 체크인/체크아웃
5. ✅ 일일 업무 보고

### Phase 3
6. ✅ 건강 설문 (선택)
7. ✅ 알림 시스템

