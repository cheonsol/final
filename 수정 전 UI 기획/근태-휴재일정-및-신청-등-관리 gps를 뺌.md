# 근태 휴재일정 및 신청 등 관리

**작성일**: 2026-01-12  
**프로젝트**: Leave Management System (JavaScript)  
**현재 상태**: 백엔드 연동 준비 완료, UI 구현 필요

---

## 📋 프로젝트 개요

웹 작가 에이전시 HR SaaS의 근태 관리 모듈이다.

### 핵심 기능
1. **근태 신청** - 반차/월차/연차/휴가/재택근무 신청
2. **캘린더** - 팀원들의 일정 확인
3. **재택근무** - 출퇴근 기록, 업무 보고
4. **연차 관리** - 연차 발생/사용/소멸 관리

---

## 🎯 개발 방향

### 현재까지 작업
- API 연동 함수 17개 작성 (근태 7개, 재택근무 6개, 날짜 유틸 4개)
- 날짜 처리 함수 준비
- 개발 서버 실행 중 (http://localhost:3000)

### 다음 작업 흐름
```
[지금] 백엔드 연동 준비됨
  ↓
1단계: 근태 신청 폼 만들기 (1-2주)
  ├─ 유형 선택 UI
  ├─ 날짜 선택기 (MUI DatePicker)
  ├─ 사유 입력
  └─ 검증 로직 (잔여 연차, 중복 방지)
  ↓
2단계: 캘린더 화면 (1주)
  ├─ FullCalendar 연동
  ├─ 월/주/일 뷰
  └─ 일정 표시
  ↓
3단계: 재택근무 기능 (1주)
  ├─ 출퇴근 시간 기록
  ├─ 업무 보고 작성
  └─ 근무 시간 집계
  ↓
4단계: 알림 시스템 (1주)
  ├─ 이메일 알림
  ├─ 브라우저 푸시
  └─ Slack 연동
  ↓
5단계: 관리자 기능 (2주)
  └─ 통계 대시보드
```

---

## 💡 이렇게 구현하면 좋겠다

### 1. 근태 신청 흐름

**사용자 경험을 최우선으로**
1. 화면 진입 → 잔여 연차 크게 표시
2. 카드 형태로 유형 선택 (클릭 한 번)
3. 날짜 선택하면 자동으로 근무일 계산
4. 실시간 검증 (연차 부족, 중복, 사전 신청 기간)
5. 미리보기 후 제출

**이렇게 하면:**
- 신청이 3분 안에 끝남
- 에러를 사전에 방지
- 사용자 불만 감소

```javascript
// 예시: 실시간 검증
const days = calculateWorkDays(startDate, endDate);
const annual = await getAnnualLeave(userId);

if (days > annual.remaining) {
  showError(`연차 부족 (필요: ${days}일, 잔여: ${annual.remaining}일)`);
}
```

---

### 2. 캘린더는 직관적으로

**한눈에 파악되도록**
- 색상으로 구분 (연차: 파랑, 워케이션: 보라)
- 팀원 이름 표시
- 클릭하면 상세 팝업
- 같은 팀 3명 이상 동시 휴가면 경고

**추가하면 좋을 기능:**
- 필터링 (내 일정만, 팀 일정, 전체)
- 월간/주간/일간 전환
- 일정 공유 URL

```javascript
// 충돌 감지 예시
const teamLeaves = await getLeaves({ team_id, date });
if (teamLeaves.length >= 3) {
  alert('⚠️ 같은 날 3명이 휴가입니다');
}
```

---

### 3. 재택근무는 간편하게

**출퇴근 버튼으로 시간 기록**
1. 출근 버튼 클릭 → 시간 자동 기록
2. 퇴근 버튼 클릭 → 근무 시간 자동 계산
3. 8시간 미만이면 알림

**일일 보고는 간단하게**
- 오늘 한 일 (텍스트)
- 진행률 (슬라이더 0-100%)
- 완료 작업 (체크리스트)
- 내일 할 일

```javascript
// 출근 기록
await checkIn(requestId);
// 시간만 기록 (위치 없이)

// 퇴근 기록
await checkOut(requestId);
// 근무 시간 자동 계산

// 업무 보고
await submitReport(requestId, {
  work_content: '오늘 한 일',
  progress_rate: 70,
  completed_tasks: ['작업1', '작업2'],
  next_day_plan: '내일 할 일'
});
```

---

### 4. 알림은 적절하게

**필요한 순간에만**

#### 발송 시점
- 신청 시 → 승인자에게
- 승인/반려 시 → 신청자에게
- 10시까지 미출근 → 본인 + 관리자 (재택근무 시)
- 23시까지 미보고 → 본인 (재택근무 시)
- 연말 2개월 전 → 미사용 연차 알림

#### 발송 채널
- 긴급: 푸시 + 이메일
- 일반: 이메일만
- 참고: Slack 메시지

---

### 5. 관리자 화면은 한눈에

**대시보드 구성**
```
┌─────────────────────────────────────┐
│  오늘 휴가자: 12명                   │
│  재택근무 중: 5명                    │
│  대기 중인 승인: 8건                 │
├─────────────────────────────────────┤
│  [월별 사용 추이 차트]               │
│  [부서별 연차 현황]                  │
│  [재택근무 근무 시간 통계]           │
└─────────────────────────────────────┘
```

**빠른 액션**
- 일괄 승인 버튼
- 이상 징후 알림 (미출근, 미보고)
- Excel 다운로드

---

## 🛠️ 기술 구현 방향

### UI 프레임워크
**Material-UI를 쓰면 좋겠다**
- 이미 설치됨
- 컴포넌트가 풍부함
- DatePicker 내장
- 반응형 자동 지원

### 상태 관리
**React Query + Zustand 조합**
- React Query: 서버 데이터 (근태 목록, 연차 현황)
- Zustand: UI 상태 (모달 열림/닫힘, 필터)

### 폼 관리
**React Hook Form + Yup**
- 이미 설치됨
- 유효성 검증 간편
- 성능 우수

```javascript
// 폼 검증 예시
const schema = yup.object({
  start_date: yup.date().required(),
  end_date: yup.date().min(yup.ref('start_date')),
  reason: yup.string().required().min(10)
});
```

---

## 📊 우선순위별 작업

### 🔴 1순위 (지금 당장)
**이것부터 만들자**
1. 근태 신청 폼
2. 신청 전 유효성 검증
3. 신청 목록 조회
4. 기본 캘린더 (월간 뷰)
5. 반응형 레이아웃

**예상 기간**: 2주  
**팀원**: 프론트 1명

---

### 🟡 2순위 (다음 달)
**있으면 좋은 기능**
1. 재택근무 출퇴근 기록
2. 업무 보고 작성
3. 미출근/미보고 알림
4. 알림 발송 (이메일)
5. 승인/반려 처리

**예상 기간**: 2주  
**팀원**: 프론트 1명 + 백엔드 1명

---

### 🟢 3순위 (여유 있을 때)
**완성도를 높이는 기능**
- 연차 자동 발생
- 통계 대시보드
- 팀 일정 충돌 감지
- 반차 처리 (오전/오후)
- 임시 저장
- 다크 모드
- Slack 연동

**예상 기간**: 3주  
**팀원**: 프론트 1명 + 백엔드 1명

---

## 🎨 화면 구성 제안

### 메인 레이아웃
```
┌─────────────────────────────────────┐
│  [로고]  근태관리    [알림] [프로필] │
├────┬────────────────────────────────┤
│ 📅 │  잔여 연차: 12일                │
│신청│                                │
│────│  [연차 신청하기] 버튼           │
│ 📆 │                                │
│캘린│  최근 신청 이력:                │
│더  │  - 2024.12.24-27 연차 (승인)   │
│────│  - 2024.11.15 반차 (승인)      │
│ 🏝️│                                │
│워케│                                │
│    │                                │
└────┴────────────────────────────────┘
```

### 모바일 화면
```
┌─────────────────┐
│  [≡] 근태관리    │
├─────────────────┤
│                 │
│ 잔여 연차: 12일  │
│                 │
│ [연차 신청하기]  │
│                 │
│ 최근 이력        │
│ 12/24-27 연차✓  │
│ 11/15 반차✓     │
│                 │
│ [하단 탭 바]     │
│ 신청|캘린더|워케 │
└─────────────────┘
```

---

## 🚀 빠른 시작 가이드

### API 사용 예시
```javascript
// 1. 근태 신청
import { createLeave, getAnnualLeave } from '@/api/leave';

const annual = await getAnnualLeave(userId);
if (annual.remaining >= requestDays) {
  await createLeave({
    leave_type_id: '1',
    start_date: '2024-12-24',
    end_date: '2024-12-27',
    reason: '가족 여행'
  });
}

// 2. 재택근무 출근 기록
import { checkIn, checkOut } from '@/api/workcation';

// 출근
await checkIn('remote_123');

// 퇴근 (자동으로 근무 시간 계산)
await checkOut('remote_123');

// 3. 근무일 계산
import { calculateWorkDays } from '@/utils/date';

const days = calculateWorkDays(
  new Date('2024-12-24'),
  new Date('2024-12-27')
); // 4일
```

---

## 📁 프로젝트 구조

```
leave-management/
├── src/
│   ├── api/              ← 준비됨 (13개 함수)
│   ├── utils/            ← 준비됨 (4개 날짜 함수)
│   │
│   ├── components/       ← 이제 만들 차례
│   │   ├── LeaveForm.jsx
│   │   ├── Calendar.jsx
│   │   └── CheckIn.jsx
│   │
│   ├── pages/            ← 이제 만들 차례
│   │   ├── LeavePage.jsx
│   │   ├── CalendarPage.jsx
│   │   └── WorkcationPage.jsx
│   │
│   ├── hooks/            ← 필요하면 추가
│   └── stores/           ← 필요하면 추가
│
├── docs/                 ← 참고 문서
└── package.json          ← 패키지 설치 완료
```

---

## ✅ 체크리스트

### 인프라
- [x] 프로젝트 생성
- [x] 패키지 설치
- [x] 개발 서버 실행
- [x] API 함수 작성
- [x] 유틸리티 함수 작성

### 다음 작업
- [ ] 라우팅 설정 (React Router)
- [ ] 근태 신청 폼 UI
- [ ] 캘린더 화면
- [ ] 상태 관리 (React Query 설정)

---

## 💭 개발 시 고려사항

### 성능
- 캘린더 데이터는 캐싱하자 (1분)
- 무한 스크롤로 목록 표시
- 이미지는 자동 압축

### 보안
- API 호출마다 토큰 검증
- XSS 방지 (입력 검증)
- HTTPS 필수

### 사용성
- 로딩 상태 표시 필수
- 에러 메시지는 친절하게
- 모바일에서도 편하게

---

**다음 작업**: 근태 신청 폼 UI 구현  
**예상 소요**: 2-3일  
**필요한 것**: react-router-dom 설치, MUI 컴포넌트 활용
