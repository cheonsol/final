# 🧠 작가 관점 스케줄·근무 관리 

## 📌 한 줄 요약
**작가는 "오늘 뭐 해야 하지?"를 대시보드에서 보고, 연재·마감·휴재·워케이션을 캘린더랑 버튼 몇 개로 관리한다.**

---

## 📌 1. 작가 일일 루틴

### 1-1. 작가 하루 루틴

```
1. 로그인한다
   → 체크인 안내 팝업: "오늘 출근하시나요?" (예/아니오)
   → 예 선택 시 체크인 처리 + 간단한 건강 설문 (손목 통증, 수면 시간, 피로도, 작업 의욕)
   → 아니오 선택 시 휴재/휴가 신청 안내

2. 오늘 마감 있는지 본다
3. 오늘 연재인지 확인한다
4. 워케이션이면 출근(체크인)한다
5. 작업한다
6. 밤에 퇴근(체크아웃) + 오늘 한 일 적는다
   → 체크아웃 안 한 경우: 11시간 경과 시 자동 퇴근 처리
   → 자동 퇴근 시 실제 퇴근 시간 수정 가능
7. 아프거나 못 할 것 같으면 휴재 신청한다
```

---

## 📌 2. 주요 화면 구성

### ① 대시보드
**"Todo 리스트 형태의 일정 관리 화면"**

#### 여기서 보여줘야 하는 것
- **오늘 할 일 목록** (Todo 리스트 형태)
  - 마감일 D-day 표시
  - 진행 중인 작업 현황
  - 다음 연재일까지 일정
- **상태별 관리**
  - 워케이션 중: 원격 근무 현황, 체크인/체크아웃 상태
  - 일반 근무 중: 오늘의 작업 목록, 마감일 현황
- **작업 현황 중심 표시** (승인 대기보다는)
  - 마감일 현황
  - 진행률
  - 작업 목록
- **빠른 액션** (커스터마이징 가능)
  - 자주 사용하는 기능을 빠른 액션에 추가
  - 드래그 앤 드롭으로 순서 변경

#### UI 구조 (Todo 리스트 형태)
```
┌─────────────────────────────────────┐
│  오늘 날짜: 2025년 1월 15일 (수)    │
├─────────────────────────────────────┤
│  📋 오늘 할 일                       │
│  ☑ 작품A 연재 완료                  │
│  ☐ 작품B 마감 (D-day) ⚠️           │
│  ☐ 작품C 선화 진행 (진행률: 50%)    │
│  ☐ 다음 연재일 준비 (1월 18일)      │
├─────────────────────────────────────┤
│  🏖️ 워케이션 중                     │
│  • 체크인: ✅ 완료 (09:30)          │
│  • 체크아웃: [체크아웃] 버튼        │
│  • 오늘의 업무 보고: [작성하기]      │
├─────────────────────────────────────┤
│  📊 작업 진행 현황                   │
│  • 작품A: 100% 완료 ✅              │
│  • 작품B: 80% 진행 중               │
│  • 작품C: 50% 진행 중               │
├─────────────────────────────────────┤
│  🚀 빠른 액션 (드래그로 순서 변경)  │
│  [휴재 신청] [워케이션 신청]        │
│  [내 스케줄 보기] [건강 설문]      │
└─────────────────────────────────────┘
```

#### 비즈니스 로직
```
1. 로그인 시:
   - 체크인 여부 확인
   - 체크인 안 되어 있으면 "오늘 출근하시나요?" 팝업 표시
   - 예 선택 시 체크인 처리 + 간단한 건강 설문 표시
   - 아니오 선택 시 휴재/휴가 신청 안내

2. 대시보드 데이터 자동 로드:
   - 오늘의 연재일 (works 테이블에서 serialization_days 확인)
   - 오늘의 마감일 (연재일 - 연재 주기 기준 계산)
   - 진행 중인 작업 목록 및 진행률
   - 워케이션 진행 여부 및 체크인 상태
   - 다음 연재일까지 일정

3. 자동 퇴근 시스템:
   - 체크인 후 11시간 경과 시 자동 퇴근 처리
   - 자동 퇴근 시 화면에 명확히 표시
   - 실제 퇴근 시간 수정 가능

4. 실시간 업데이트 (알림 수신 시)
```

#### 필요한 API
```
GET /api/authors/dashboard/today
응답:
{
  "today": "2025-01-15",
  "serializations": [
    { "workName": "작품A", "platform": "네이버" }
  ],
  "deadlines": [
    { "workName": "작품B", "dday": 0, "status": "urgent" }
  ],
  "workcation": {
    "isActive": true,
    "checkinStatus": "completed",
    "checkinTime": "09:30",
    "checkoutStatus": "pending"
  },
  "pendingRequests": 1
}
```

---

### ② 내 스케줄 (캘린더)

#### 캘린더에 표시되는 것
- **연재일** (작품별 색상 구분, 초록색)
- **마감일** (D-day 배지 표시, 주황색)
- **휴재 기간** (회색/패턴, 일수 표시 예: "45일째")
  - 단기 휴재 (1-3일): 연한 회색
  - 중기 휴재 (4-14일): 회색
  - 장기 휴재 (15일 이상): 진한 회색 + 경고 아이콘
- **연차** (파란색)
- **워케이션 기간** (보라색/그라데이션)
- **야근** (주황색)

#### 상태별 투명도
- **승인 대기**: 반투명
- **승인 완료**: 불투명
- **반려**: 빨간색 테두리

#### 동작
- 날짜 클릭 시 해당 날짜의 일정 상세 정보 팝업 표시
- 휴재 기간과 연재일이 겹치면 경고 표시
- 휴재 일수 표시 (예: "시즌 휴재 45일째")

#### UI 구조
```
┌─────────────────────────────────────┐
│  [월별] [주별] [일별] ← 뷰 전환     │
├─────────────────────────────────────┤
│  일  월  화  수  목  금  토         │
│      1   2   3   4   5   6          │
│  7   8   9  10  11  12  13         │
│ 14 [15] 16  17  18  19  20         │
│     📅연재                          │
│     ⚠️마감                          │
│ 21  22  23  24  25  26  27         │
│ 28  29  30  31                      │
├─────────────────────────────────────┤
│  범례:                              │
│  📅 연재일  ⚠️ 마감일  🏖️ 워케이션  │
│  🏖️ 휴재    📋 연차                │
└─────────────────────────────────────┘
```

#### 비즈니스 로직
```
1. 작가의 모든 작품 조회
2. 각 작품의 연재 주기 설정 확인:
   - 7일 주기 (주 1회)
   - 10일 주기
   - 14일 주기 (격주)
   - 커스텀 주기
3. 연재 주기 기준으로 연재일 계산
4. 연재일 - 마감일 전 기간 = 마감일 계산
5. 근태 신청 정보와 병합
6. 휴재 일수 계산 및 표시:
   - 휴재 시작일부터 현재까지 일수 계산
   - 장기 휴재(15일 이상) 시 경고 표시
7. 충돌 감지:
   - 휴재 기간과 연재일 겹치면 경고
   - 워케이션과 마감일 겹치면 알림
```

#### 필요한 기술 스택
```json
{
  "dependencies": {
    "@fullcalendar/react": "^6.1.10",
    "@fullcalendar/daygrid": "^6.1.10",
    "date-fns": "^2.30.0"
  }
}
```

#### 필요한 API
```
GET /api/authors/calendar?month=2025-01
응답:
{
  "events": [
    {
      "date": "2025-01-15",
      "type": "serialization",
      "workName": "작품A",
      "platform": "네이버"
    },
    {
      "date": "2025-01-12",
      "type": "deadline",
      "workName": "작품A",
      "dday": 3
    },
    {
      "date": "2025-01-20",
      "type": "hiatus",
      "startDate": "2025-01-20",
      "endDate": "2025-01-27"
    }
  ]
}
```

---

### ③ 휴재 / 근태 신청 화면

#### 작가가 하는 행동
1. 휴재 신청 버튼 누른다
2. 작품 고른다
3. 며칠 쉬는지 고른다
4. 이유 적는다
5. 제출

#### 시스템이 자동으로 해주는 것
- 연재 며칠 영향 받는지 계산
- 연재/마감 겹치면 경고
- 승인 상태 관리

#### 작가 화면
- 대기 / 승인 / 반려 상태 표시

#### UI 구조
```
┌─────────────────────────────────────┐
│  휴재 신청                           │
├─────────────────────────────────────┤
│  1단계: 작품 선택                    │
│  ☑ 작품A (네이버, 화요일 연재)      │
│  ☐ 작품B (카카오, 목요일 연재)      │
│                                     │
│  2단계: 휴재 기간                    │
│  시작일: [2025-01-20]               │
│  종료일: [2025-01-27]               │
│  ⚠️ 총 2회차 연재에 영향            │
│                                     │
│  3단계: 휴재 유형                    │
│  ○ 정기 휴재 (예정된 휴재)          │
│  ○ 건강 휴재 (손목 통증 등)          │
│  ○ 긴급 휴재 (갑작스러운 사정)       │
│  ○ 시즌 휴재 (시즌 종료 후 장기)     │
│  ○ 일상 휴식 (짧은 휴식, 연재 지장 없음) │
│    → 마감 내역 지정 필요, 자동 승인 가능 │
│                                     │
│  4단계: 사유                        │
│  [텍스트 입력 영역]                 │
│                                     │
│  [신청하기] 버튼                    │
└─────────────────────────────────────┘
```

#### 비즈니스 로직
```
1. 작품 선택 시:
   - 선택한 작품의 연재 요일 확인
   - 휴재 기간과 겹치는 연재일 계산
   - "총 N회차 연재에 영향" 표시

2. 신청 제출 시:
   - 연재 일정 충돌 검증
   - 충돌 시 경고 메시지 표시
   - 근태 신청 테이블에 저장
   - 편집자에게 알림 발송

3. 승인 프로세스:
   - 편집자 1차 승인
   - 운영팀 최종 승인
   - 승인 완료 시 연재 캘린더에 자동 반영
```

#### 필요한 기술 스택
```json
{
  "dependencies": {
    "react-hook-form": "^7.48.2",
    "react-datepicker": "^4.21.0",
    "date-fns": "^2.30.0"
  }
}
```

#### 필요한 API
```
POST /api/leaves/requests/hiatus
요청:
{
  "workIds": [1, 2],
  "startDate": "2025-01-20",
  "endDate": "2025-01-27",
  "hiatusType": "health",
  "reason": "손목 통증으로 인한 휴재"
}

응답:
{
  "requestId": 123,
  "affectedEpisodes": 2,
  "status": "pending",
  "message": "편집자 승인 대기 중입니다"
}
```

---

### ④ 워케이션 관리 화면

#### 워케이션 승인되면 자동으로 생김

**시작 시:**
- 시작 보고서 제출 폼
  - 목적 재확인
  - 예상 작업 계획
  - 연락처 확인

**아침:**
- [체크인] 버튼 누른다
- 간단한 건강 설문 (손목 통증, 수면 시간, 피로도, 작업 의욕)

**저녁:**
- [체크아웃] 버튼 누른다
- 오늘 한 일 간단히 적는다
- 일일 업무 보고 제출

**종료 시:**
- 종료 보고서 제출 폼
  - 완료한 작업 요약
  - 작업량 (완성 화수 등)
  - 다음 연재 준비도
  - 개선 사항 및 피드백

#### 화면에 보이는 것
- 오늘 체크인/체크아웃 상태
- 오늘 근무 시간
- 오늘 업무 보고 작성란
- **팀 단위 Todo 리스트 및 일정 분담**
  - 각 팀원별 담당 작업 할당
  - 작업 완료 시 체크
  - 진행률 자동 계산 (50%, 67% 등)
  - 차트로 시각화 표시

#### UI 구조
```
┌─────────────────────────────────────┐
│  워케이션 관리                      │
│  기간: 2025-01-15 ~ 2025-01-22     │
├─────────────────────────────────────┤
│  오늘 (2025-01-15)                  │
│                                     │
│  체크인: ✅ 완료 (09:30)           │
│  위치: 서울시 강남구                │
│                                     │
│  체크아웃: [체크아웃] 버튼          │
│                                     │
│  ────────────────────────────────  │
│                                     │
│  오늘의 업무 보고                    │
│  • 업무 내용: [입력란]              │
│  • 진행률: [슬라이더] 50%            │
│  • 완료한 작업:                      │
│    ☑ 콘티 완료                      │
│    ☑ 선화 50% 완료                  │
│  • 내일 계획: [입력란]              │
│                                     │
│  [제출] 버튼                        │
│                                     │
│  ────────────────────────────────  │
│                                     │
│  📋 팀 Todo 리스트                  │
│  • 작품A 콘티 (담당: 김작가)        │
│    ☑ 완료 (진행률: 100%)            │
│  • 작품A 선화 (담당: 이작가)        │
│    ☐ 진행 중 (진행률: 50%)          │
│  • 작품B 채색 (담당: 박작가)        │
│    ☐ 대기 (진행률: 0%)              │
│                                     │
│  📊 팀 전체 진행률: 50%             │
└─────────────────────────────────────┘
└─────────────────────────────────────┘
```

#### 비즈니스 로직
```
1. 체크인 시:
   - 현재 위치 자동 기록 (GPS)
   - 위치명 자동 인식 (Geocoding API)
   - 체크인 시간 기록
   - 사진 업로드 (선택)

2. 체크아웃 시:
   - 체크아웃 시간 기록
   - 일일 근무 시간 자동 계산 (체크아웃 - 체크인)
   - 위치 기록

3. 일일 업무 보고:
   - 워케이션 기간 중 매일 제출 필수
   - 보고 내용: 업무 내용, 진행률, 완료한 작업, 다음 날 계획
   - 미제출 시 관리자에게 알림 발송
```

#### 필요한 기술 스택
```json
{
  "dependencies": {
    "@react-google-maps/api": "^2.19.0",
    "react-geocode": "^0.2.1",
    "react-slider": "^2.0.6"
  }
}
```

#### 필요한 API
```
POST /api/leaves/workcations/{id}/checkin
요청:
{
  "latitude": 37.5665,
  "longitude": 127.0780
}

POST /api/leaves/workcations/{id}/checkout
POST /api/leaves/workcations/{id}/daily-report
요청:
{
  "workContent": "콘티 완료 및 선화 진행",
  "progressRate": 50,
  "completedTasks": ["콘티 완료", "선화 50%"],
  "nextDayPlan": "선화 완료 및 채색 시작"
}
```

---

### ⑤ 건강 설문

#### 데일리 건강 설문 (체크인 시 자동 표시)
- 매일 체크인 시 간단한 건강 설문 팝업
- 설문 항목:
  - 손목 통증 정도 (1-10점)
  - 수면 시간 (전날 밤)
  - 피로도 (1-10점)
  - 오늘 작업 의욕 (1-10점)
- 목적: 일일 건강 상태 추적으로 조기 위험 감지

#### 연속 출근 건강 수치 예측
- 연속 출근 일수에 따른 건강 수치 예측
- 연속 출근 7일 이상 → 건강 점수 자동 감소 경고
- 연속 출근 14일 이상 → 휴재 권장 알림
- 연속 출근 패턴 분석 및 개인별 최적 근무 패턴 제안
- 데이터 활용: 과거 건강 설문 데이터 기반 머신러닝 예측 모델

#### 주간/월간 건강 설문
- 주간 설문: 매주 월요일 자동 리마인더
- 월간 설문: 월말 종합 건강 리포트 자동 생성
- 설문 미제출 시 알림 발송

#### UI 구조 (데일리 건강 설문)
```
┌─────────────────────────────────────┐
│  오늘의 건강 체크                   │
│  체크인과 함께 건강 상태를          │
│  확인해주세요.                      │
├─────────────────────────────────────┤
│  손목 통증: [슬라이더] 7점          │
│  수면 시간: [입력] 5시간             │
│  피로도: [슬라이더] 6점             │
│  오늘 작업 의욕: [슬라이더] 5점     │
│                                     │
│  ⚠️ 연속 출근 7일째                 │
│  건강 점수 예측: 감소 경고          │
│                                     │
│  [제출] 버튼                        │
└─────────────────────────────────────┘
```

#### UI 구조 (주간/월간 건강 설문)
```
┌─────────────────────────────────────┐
│  주간 건강 설문                      │
│  이번 주 건강 상태를 확인해주세요.   │
├─────────────────────────────────────┤
│  손목 통증: [슬라이더] 7점          │
│  허리/목 통증: [슬라이더] 5점       │
│  눈 피로도: [슬라이더] 6점          │
│  마감 스트레스: [슬라이더] 8점      │
│  수면 시간: [입력] 5시간             │
│  창작 의욕: [슬라이더] 5점          │
│  밤샘 작업 횟수: [입력] 3회         │
│                                     │
│  [제출] 버튼                        │
└─────────────────────────────────────┘
```

---

## 📌 3. 기능 요약

### 연재 스케줄
- 작품별 연재 요일 설정 (예: 매주 화요일)
- 연재일 기준으로 마감일 자동 계산 (기본 3일 전)

### 마감 알림
- D-3 알림: 마감일 3일 전 알림
- D-day 알림: 마감일 당일 긴급 알림

### 휴재
- 휴재 기간 선택 시 영향받는 연재 회차 자동 계산
- 연재 일정과의 충돌 감지 및 경고

### 워케이션
- 원격 근무 형태의 휴양지 근무
- 매일 체크인/체크아웃 및 일일 업무 보고 제출

---

## 📌 4. 핵심 요약

1. 작가의 일일 루틴을 기반으로 화면 구성
2. 주요 화면: 대시보드, 캘린더, 휴재 신청, 워케이션 관리
3. 휴재 및 워케이션 신청 시 연재 일정과의 충돌 자동 검증

---

## 📌 5. 비즈니스 로직 상세

### 5-1. 연재 일정 자동 계산
```
입력: 작품A, 연재 주기 7일 (주 1회), 마감일 3일 전
계산:
- 오늘이 2025-01-15 (수요일)이면
- 다음 연재일: 2025-01-21 (화요일, 연재 주기 기준)
- 마감일: 2025-01-18 (토요일, 연재일 - 3일)

연재 주기 옵션:
- 7일 주기 (주 1회)
- 10일 주기
- 14일 주기 (격주)
- 커스텀 주기 설정 가능
```

### 5-2. 휴재 영향도 계산
```
입력: 작품A (화요일), 휴재 2025-01-20 ~ 2025-01-27
계산:
- 2025-01-21 (화) 연재일 포함 → 영향 1회차
- 2025-01-28 (화) 연재일 포함 → 영향 1회차
결과: 총 2회차 연재에 영향
```

### 5-3. 충돌 감지
```
휴재 기간과 연재일이 겹치는 경우:
- 경고 메시지 표시: "선택한 기간에 연재일이 포함되어 있습니다."
- 사용자 확인 후 제출 가능
```
